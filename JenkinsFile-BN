pipeline {
    agent any
    stages {
        try {
           stage('end-to-end-tests') {
             node {      
               echo "HEllo"
             }
           }
        } catch (e) {
           result = "FAIL" // make sure other exceptions are recorded as failure too
        }
        
        stage('deploy') {
           if (result.equals("SUCCESS")) {
              build 'deploy'
           } else {
              echo "Cannot deploy without successful build" // it is important to have a deploy stage even here for the current visualization
           }
        }
    }
}
